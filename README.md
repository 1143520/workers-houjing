# 喉镜压力测试系统

这是一个基于 Cloudflare Workers 部署的喉镜压力测试系统，用于实时监测和记录喉镜操作过程中的压力数据。

## 系统功能

- 实时数据采集：同时支持多达16个传感器的压力数据采集
- 图表可视化：实时显示三个传感器的压力数据曲线
- 数据导出：支持将测试数据导出为JSON格式
- 用户认证：基于用户名和密码的安全登录系统

## 技术特点

- 前端使用原生JavaScript和Tailwind CSS构建
- 使用Plotly.js实现实时数据可视化
- 基于Web Serial API实现串口通信
- 部署在Cloudflare Workers上，保证低延迟和高可用性

## 本地开发环境配置

### 系统要求
- Python 3.8+
- Windows 10/11
- Chrome 或 Edge 最新版本
- 串口设备：支持115200波特率的串口通信
- 稳定的网络连接

### 依赖安装
1. 克隆项目到本地：
bash
git clone [repository-url]
cd worker-houjing
```

2. 创建并激活虚拟环境（推荐）：
```bash
python -m venv venv
.\venv\Scripts\activate
```

3. 安装依赖：
```bash
pip install -r requirements.txt
```

### 运行程序
1. 确保串口设备已正确连接并安装驱动
2. 运行主程序：
```bash
python main.py
```

3. 登录系统：
   - 用户名：航小北
   - 密码：buaa

### 项目结构
```
worker-houjing/
├── main.py              # 主程序入口
├── main_system.py       # 系统核心功能
├── InterfaceUI.py       # 界面UI定义
├── requirements.txt     # 项目依赖
├── README.md           # 项目说明
└── icons/              # UI图标资源
    └── down-arrow.png  # 下拉箭头图标
```

## 使用说明

1. 系统登录
   - 使用指定的用户名和密码登录系统
   - 登录成功后自动进入主界面

2. 设备连接
   - 点击"连接串口"按钮
   - 在弹出的串口选择对话框中选择正确的设备
   - 连接成功后状态会显示"已连接"

3. 数据采集
   - 在左侧面板选择需要监测的传感器（可选择1-16号）
   - 填写患者信息（姓名、年龄等）
   - 点击"开始采集"按钮开始记录数据
   - 数据会实时显示在右侧三个图表中
   - 点击"停止采集"结束记录

4. 数据导出
   - 点击"导出数据"按钮
   - 系统会自动生成包含测试数据的JSON文件
   - 文件名格式：pressure_data_YYYY-MM-DD.json

## 注意事项

1. 使用前请确保串口设备已正确连接并安装驱动
2. 数据采集过程中请勿刷新或关闭页面
3. 建议定期导出数据，避免数据丢失
4. 使用完毕后请正确断开串口连接

## 技术支持

如有任何问题或建议，请联系系统管理员。

## 开发者

本系统由清华大学薛某支持开发。``` 